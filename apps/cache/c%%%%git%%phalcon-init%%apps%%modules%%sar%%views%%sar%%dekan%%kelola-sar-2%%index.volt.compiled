<!DOCTYPE html>
<head>
    <title>SAR</title>
    <link href="<?= $this->url->get('https://phalcon-init.local/asset/css/bootstrap.min.css') ?>" rel="stylesheet">
<link href="<?= $this->url->get('https://phalcon-init.local/asset/font-awesome/css/font-awesome.css') ?>" rel="stylesheet">
<!-- Morris -->
<link href="<?= $this->url->get('https://phalcon-init.local/asset/css/plugins/morris/morris-0.4.3.min.css') ?>" rel="stylesheet">

<link href="<?= $this->url->get('https://phalcon-init.local/asset/css/animate.css') ?>" rel="stylesheet">
<link href="<?= $this->url->get('https://phalcon-init.local/asset/css/style.css') ?>" rel="stylesheet">

<link href="<?= $this->url->get('https://phalcon-init.local/asset/css/plugins/dataTables/datatables.min.css') ?>" rel="stylesheet">
<link href="<?= $this->url->get('https://phalcon-init.local/asset/css/plugins/dropzone/basic.css') ?>" rel="stylesheet">
<link href="<?= $this->url->get('https://phalcon-init.local/asset/css/plugins/dropzone/dropzone.css') ?>" rel="stylesheet">
<link href="<?= $this->url->get('https://phalcon-init.local/asset/css/plugins/jasny/jasny-bootstrap.min.css') ?>" rel="stylesheet">
<link href="<?= $this->url->get('https://phalcon-init.local/asset/css/plugins/codemirror/codemirror.css') ?>" rel="stylesheet">
<link href="<?= $this->url->get('https://phalcon-init.local/asset/css/plugins/datapicker/datepicker3.css') ?>" rel="stylesheet">
<link href="<?= $this->url->get('https://phalcon-init.local/asset/css/plugins/iCheck/custom.css') ?>" rel="stylesheet">
<link href="<?= $this->url->get('https://phalcon-init.local/asset/css/plugins/chosen/bootstrap-chosen.css') ?>" rel="stylesheet">
<link href="<?= $this->url->get('https://phalcon-init.local/asset/css/plugins/bootstrap-tagsinput/bootstrap-tagsinput.css') ?>" rel="stylesheet">
<link href="<?= $this->url->get('https://phalcon-init.local/asset/css/plugins/colorpicker/bootstrap-colorpicker.min.css') ?>" rel="stylesheet">
<link href="<?= $this->url->get('https://phalcon-init.local/asset/css/plugins/cropper/cropper.min.css') ?>" rel="stylesheet">
<link href="<?= $this->url->get('https://phalcon-init.local/asset/css/plugins/switchery/switchery.css') ?>" rel="stylesheet">
<link href="<?= $this->url->get('https://phalcon-init.local/asset/css/plugins/jasny/jasny-bootstrap.min.css') ?>" rel="stylesheet">
<link href="<?= $this->url->get('https://phalcon-init.local/asset/css/plugins/nouslider/jquery.nouislider.css') ?>" rel="stylesheet">
<link href="<?= $this->url->get('https://phalcon-init.local/asset/css/plugins/ionRangeSlider/ion.rangeSlider.css') ?>" rel="stylesheet">
<link href="<?= $this->url->get('https://phalcon-init.local/asset/css/plugins/ionRangeSlider/ion.rangeSlider.skinFlat.css') ?>" rel="stylesheet">
<link href="<?= $this->url->get('https://phalcon-init.local/asset/css/plugins/awesome-bootstrap-checkbox/awesome-bootstrap-checkbox.css') ?>" rel="stylesheet">
<link href="<?= $this->url->get('https://phalcon-init.local/asset/css/plugins/clockpicker/clockpicker.css') ?>" rel="stylesheet">
<link href="<?= $this->url->get('https://phalcon-init.local/asset/css/plugins/daterangepicker/daterangepicker-bs3.css') ?>" rel="stylesheet">
<link href="<?= $this->url->get('https://phalcon-init.local/asset/css/plugins/select2/select2.min.css') ?>" rel="stylesheet">
<link href="<?= $this->url->get('https://phalcon-init.local/asset/css/plugins/touchspin/jquery.bootstrap-touchspin.min.css') ?>" rel="stylesheet">
<link href="<?= $this->url->get('https://phalcon-init.local/asset/css/plugins/dualListbox/bootstrap-duallistbox.min.css') ?>" rel="stylesheet">

<link href="<?= $this->url->get('https://phalcon-init.local/asset/css/plugins/select2/select2.min.css') ?>" rel="stylesheet">

</head>
<body>
	  
<nav class="navbar-default navbar-static-side" role="navigation">
    <div class="sidebar-collapse">
        <ul class="nav metismenu" id="side-menu">
            <li class="nav-header">
                <div class="dropdown profile-element"> <span>
                    <img alt="image" class="img-circle" style="width:70px;height:70px;border:0;" src="<?= $this->url->get('https://phalcon-init.local/asset/img/default.png') ?>" />
                     </span>
                <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                    <span class="clear"> <span class="block m-t-xs"> <strong class="font-bold">NAMA</strong>
                     </span> <span class="text-muted text-xs block">Admin<b class="caret"></b></span> </span> </a>
                <ul class="dropdown-menu animated fadeInRight m-t-xs">
                    <li><a href="">Profile</a></li>
                    <li class="divider"></li>
                    <li><a href="<?= $this->url->get('https://phalcon-init.local/SAR/Users/logout') ?>">Logout</a></li>
                </ul>
            </div>
            <div class="logo-element">
                SAR
            </div>
        </li>
            <li id="sidebar-home">
                <a href=""><i class="fa fa-edit"></i> <span class="nav-label">Dashboard</span></a>
            </li>
            <?php if ($TipeSar != null) { ?>
            <?php foreach ($TipeSar as $tipe) { ?>
                <?php if ($tipe === 1) { ?>
                <li id="sidebar-sar1">
                    <a href="/kelolasar-1"><i class="fa fa-edit"></i> <span class="nav-label">Kelola SAR 1</span></a>
                </li>
                <?php } elseif ($tipe === 2) { ?>
                <li id="sidebar-sar2">
                    <a href="/kelolasar-2"><i class="fa fa-edit"></i> <span class="nav-label">Kelola SAR 2</span></a>
                </li>
                <?php } elseif ($tipe === 3) { ?>
                <li id="sidebar-sar3">
                    <a href="/kelolasar-3"><i class="fa fa-edit"></i> <span class="nav-label">Kelola SAR 3</span></a>
                </li>
                <?php } elseif ($tipe === 4) { ?>
                <li id="sidebar-sar4">
                    <a href="/kelolasar-4"><i class="fa fa-edit"></i> <span class="nav-label">Kelola SAR 4</span></a>
                </li>
                <?php } elseif ($tipe === 5) { ?>
                <li id="sidebar-sar5">
                    <a href="/kelolasar-5"><i class="fa fa-edit"></i> <span class="nav-label">Kelola SAR 5</span></a>
                </li>
                <?php } ?>
            <?php } ?>
            <?php } ?>
            <li id="sidebar-laporan">
                <a href=""><i class="fa fa-book"></i> <span class="nav-label">Laporan SAR</span></a>
            </li>
            <li id="sidebar-survey">
                <a href=""><i class="fa fa-bullhorn"></i> <span class="nav-label">Survey SAR</span></a>
            </li>
        </ul>

    </div>
</nav>

      <div id="page-wrapper" class="gray-bg">
    <div class="row border-bottom">
    <nav class="navbar navbar-static-top" role="navigation" style="margin-bottom: 0">
    <div class="navbar-header">
        <a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="#"><i class="fa fa-bars"></i> </a>
    </div>

<ul class="nav navbar-top-links navbar-right">
    <li style="padding:20px;float:right;">
        
        <form id="logout-form" action="<?= $this->url->get('https://phalcon-init.local/SAR/Users/logout') ?>" method="POST" >
            <button class="btn btn-outline-dark btn-sm" type="submit">
                <i class="fa fa-sign-out"></i> Log out
            </button>
        </form>
    </li>

</ul>
</nav>
      

<div id="wrapper">    
<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-lg-10">
        <h2>Kelola SAR 2</h2>
        <ol class="breadcrumb">
            <li>
                <a href="">Dashboard</a>
            </li>
            <li class="active">
                <strong>Kelola SAR 2</strong>
            </li>
        </ol>
    </div>
</div>

<div class="row">
    <div class="col-lg-12">
        <div class="ibox float-e-margins">
            <div class="ibox-title">
                <h3><center><strong>Institut</strong></center></h3>
            </div>
            <div class="ibox-content">
          		<?= $this->flashSession->output() ?>
                <div class="table-responsive">
                    <table class="table table-striped table-hover" style="font-size: small;">
                        <thead>
                            <tr>
                                <th>No</th>
                                <th>Jenjang</th>
                                <th>Sasaran</th>
                                <th>Capaian</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <?php $i = 1; ?>
                            <?php foreach ($SarAssigmentS as $sar) { ?>
                            <tr>
                                <td><?= $i ?></td>
                                <td><?= $sar['jenjang'] ?></td>
                                <td><?= ($sar['sasaran'] == 0 ? '-' : $sar['sasaran']) ?></td>
                                <td><?= ($sar['capaian'] == 0 ? '-' : $sar['capaian']) ?></td>
                                <td>
                                   
                                </td>
                            </tr>
                                <?php $i = $i + 1; ?>
                            <?php } ?>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="ibox-title">
                <h3><center><strong>Fakultas</strong></center></h3>
            </div>
            <div class="ibox-content">
              <div class="table-responsive">
                  <table class="table table-striped table-hover" style="font-size: small;">
                      <thead>
                          <tr>
                              <th>No</th>
                              <th>Jenjang</th>
                              <th>Sasaran</th>
                              <th>Capaian</th>
                              <th>Action</th>
                          </tr>
                      </thead>
                      <tbody>
                          <?php $i = 1; ?>
                          <?php foreach ($SarAssigmentM as $sar) { ?>
                          <tr>
                              <td><?= $i ?></td>
                              <td><?= $sar['jenjang'] ?></td>
                              <td><?= ($sar['sasaran'] == 0 ? '-' : $sar['sasaran']) ?></td>
                              <td><?= ($sar['capaian'] == 0 ? '-' : $sar['capaian']) ?></td>
                              <td>
                                  <?php if ($sar['IsLocked'] == 0) { ?>
                                    <button type="button" class="btn btn-warning btn-xs" 
                                    data-id = "<?= $sar['id'] ?>"
                                    data-jenjang = "<?= $sar['jenjang'] ?>"
                                    data-sasaran = "<?= $sar['sasaran'] ?>"
                                    data-toggle="modal" data-target="#modal-edit"
                                    ><span class="fa fa-pencil"></span> Ubah</button>

                                    <button type="button" class="btn btn-danger btn-xs lock-button" 
                                    data-id = "<?= $sar['id'] ?>"
                                    data-locked = "<?= $sar['IsLocked'] ?>"
                                    data-jenjang = "<?= $sar['jenjang'] ?>"
                                    ><span class="fa fa-unlock"></span> Lock</button>
                                    <?php } else { ?>
                                        <label class="label label-primary"><i class="fa fa-lock"></i> Terkunci</label>
                                    <?php } ?>
                              </td>
                          </tr>
                              <?php $i = $i + 1; ?>
                          <?php } ?>
                      </tbody>
                  </table>
              </div>
          </div>
        </div>
    </div>
</div>
</div>
<form id="lock-form" method="post" action="/kelolasar-2/lock" style="display: none;">
    <input name="id" type="text" id="lock-id" value="">
</form>
<div class="modal inmodal fade" id="modal-edit" tabindex="-1" role="dialog"  aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h3 class="modal-title">Edit SAR</h3>
            </div>
            <form id="edit-sopir" method="post" action="/kelolasar-2/set" class="form-horizontal" enctype="multipart/form-data">
              <div class="modal-body">
                <div class="alert alert-danger hidden" id="alertformE"></div>
                <div class="form-group row">
                    <label for="jenjang" class="col-sm-3 control-label required">Jenjang</label>
                    <div class="col-sm-8">
                      <input type="text" class="form-control" required name="jenjang" id="edt_jenjang" disabled>
                      <input type="hidden" class="form-control" required name="id" id="id">
                    </div>
                </div>
                <div class="form-group row">
                    <label for="sasaran" class="col-sm-3 control-label required">Sasaran</label>
                    <div class="col-sm-8">
                      <input type="number" step="0.01" class="form-control" required name="sasaran"  id="edt_sasaran">
                    </div>
                </div>
              </div>
              <div class="modal-footer">
                <button type="submit" id="button_edit"  style="margin-bottom:0px" class="btn btn-warning">Ubah</button>
                <button type="button" class="btn btn-white" data-dismiss="modal">Batal</button>
              </div>
            </form>
  
        </div>
    </div>
  </div>

       
      <div class="footer">
    <div>
        <strong>Copyright</strong> CyberDeveloper.com &copy; 2019
    </div>
</div>

</body>
    

 <!-- Mainly scripts -->
    <script src="<?= $this->url->get('https://phalcon-init.local/asset/js/jquery-3.1.1.min.js') ?>"></script>
    <script src="<?= $this->url->get('https://phalcon-init.local/asset/js/bootstrap.min.js') ?>"></script>
    <script src="<?= $this->url->get('https://phalcon-init.local/asset/js/plugins/metisMenu/jquery.metisMenu.js') ?>"></script>
    <script src="<?= $this->url->get('https://phalcon-init.local/asset/js/plugins/slimscroll/jquery.slimscroll.min.js') ?>"></script>

    <!-- Flot -->
    <script src="<?= $this->url->get('https://phalcon-init.local/asset/js/plugins/flot/jquery.flot.js') ?>"></script>
    <script src="<?= $this->url->get('https://phalcon-init.local/asset/js/plugins/flot/jquery.flot.tooltip.min.js') ?>"></script>
    <script src="<?= $this->url->get('https://phalcon-init.local/asset/js/plugins/flot/jquery.flot.spline.js') ?>"></script>
    <script src="<?= $this->url->get('https://phalcon-init.local/asset/js/plugins/flot/jquery.flot.resize.js') ?>"></script>
    <script src="<?= $this->url->get('https://phalcon-init.local/asset/js/plugins/flot/jquery.flot.pie.js') ?>"></script>
    <script src="<?= $this->url->get('https://phalcon-init.local/asset/js/plugins/flot/jquery.flot.symbol.js') ?>"></script>
    <script src="<?= $this->url->get('https://phalcon-init.local/asset/js/plugins/flot/curvedLines.js') ?>"></script>

    <script src="<?= $this->url->get('https://phalcon-init.local/asset/js/plugins/dataTables/datatables.min.js') ?>"></script>
    <script src="<?= $this->url->get('https://phalcon-init.local/asset/js/plugins/datapicker/bootstrap-datepicker.js') ?>"></script>
    <script src="<?= $this->url->get('https://phalcon-init.local/asset/js/plugins/chosen/chosen.jquery.js') ?>"></script>
    <script src="<?= $this->url->get('https://phalcon-init.local/asset/js/plugins/dataTables/datatables.min.js') ?>"></script>
    <script src="<?= $this->url->get('https://phalcon-init.local/asset/js/plugins/fullcalendar/moment.min.js') ?>"></script>

    <!-- Date range picker -->
    <script src="<?= $this->url->get('https://phalcon-init.local/asset/js/plugins/daterangepicker/daterangepicker.js') ?>"></script>

    <script src="<?= $this->url->get('https://phalcon-init.local/asset/js/plugins/datapicker/bootstrap-datepicker.js') ?>"></script>

    <!-- Peity -->
    <script src="<?= $this->url->get('https://phalcon-init.local/asset/js/plugins/peity/jquery.peity.min.js') ?>"></script>
    <script src="<?= $this->url->get('https://phalcon-init.local/asset/js/demo/peity-demo.js') ?>"></script>

    <!-- Custom and plugin javascript -->
    <script src="<?= $this->url->get('https://phalcon-init.local/asset/js/inspinia.js') ?>"></script>
    <script src="<?= $this->url->get('https://phalcon-init.local/asset/js/plugins/pace/pace.min.js') ?>"></script>

    <!-- jQuery UI -->
    <script src="<?= $this->url->get('https://phalcon-init.local/asset/js/plugins/jquery-ui/jquery-ui.min.js') ?>"></script>


    <!-- Chosen -->
    <script src="<?= $this->url->get('https://phalcon-init.local/asset/js/plugins/chosen/chosen.jquery.js') ?>"></script>

   <!-- JSKnob -->
   <script src="<?= $this->url->get('https://phalcon-init.local/asset/js/plugins/jsKnob/jquery.knob.js') ?>"></script>

   <!-- Input Mask-->
    <script src="<?= $this->url->get('https://phalcon-init.local/asset/js/plugins/jasny/jasny-bootstrap.min.js') ?>"></script>

   <!-- NouSlider -->
   <script src="<?= $this->url->get('https://phalcon-init.local/asset/js/plugins/nouslider/jquery.nouislider.min.js') ?>"></script>

   <!-- Switchery -->
   <script src="<?= $this->url->get('https://phalcon-init.local/asset/js/plugins/switchery/switchery.js') ?>"></script>

    <!-- MENU -->
    <script src="<?= $this->url->get('https://phalcon-init.local/asset/js/plugins/metisMenu/jquery.metisMenu.js') ?>"></script>


    <!-- Clock picker -->
    <script src="<?= $this->url->get('https://phalcon-init.local/asset/js/plugins/clockpicker/clockpicker.js') ?>"></script>

    <!-- Date range use moment.js same as full calendar plugin -->
    <script src="<?= $this->url->get('https://phalcon-init.local/asset/js/plugins/fullcalendar/moment.min.js') ?>"></script>

    <!-- Date range picker -->
    <script src="<?= $this->url->get('https://phalcon-init.local/asset/js/plugins/daterangepicker/daterangepicker.js') ?>"></script>

    <!-- Select2 -->
    <script src="<?= $this->url->get('https://phalcon-init.local/asset/js/plugins/select2/select2.full.min.js') ?>"></script>

    <!-- TouchSpin -->
    <script src="<?= $this->url->get('https://phalcon-init.local/asset/js/plugins/touchspin/jquery.bootstrap-touchspin.min.js') ?>"></script>

    <!-- Tags Input -->
    <script src="<?= $this->url->get('https://phalcon-init.local/asset/js/plugins/bootstrap-tagsinput/bootstrap-tagsinput.js') ?>"></script>

    <!-- Dual Listbox -->
    <script src="<?= $this->url->get('https://phalcon-init.local/asset/js/plugins/dualListbox/jquery.bootstrap-duallistbox.js') ?>"></script>


<script src="<?= $this->url->get('https://phalcon-init.local/asset/js/sweetalert.min.js') ?> "></script>
<script>

        $(document).ready(function(){
            $("#sidebar-sar2").addClass("active");
            $('.dataTables-example').DataTable({
                pageLength: 25,
                responsive: true,
                dom: '<"html5buttons"B>lTfgitp',
                buttons: [
                    {extend: 'copy'},
                    {extend: 'print',
                     customize: function (win){
                            $(win.document.body).addClass('white-bg');
                            $(win.document.body).css('font-size', '10px');

                            $(win.document.body).find('table')
                                    .addClass('compact')
                                    .css('font-size', 'inherit');
                    }
                    }
                ],
                language:{
                    "lengthMenu": "Menampilkan _MENU_ baris per halaman",
                    "zeroRecords": "Maaf, data yang dicari tidak ditemukan!",
                    "info": "Menampilkan halaman _PAGE_ dari _PAGES_ halaman",
                    "infoEmpty": "Belum ada data yang tersedia!",
                    "infoFiltered": "(Disaring dari _MAX_ total baris data!)",
                    "sSearch": "Cari :",
                    "paginate": {
                        "previous": "Sebelumnya",
                        "next": "Selanjutnya",
                    }  
                }

            });

        });

    </script>
    <script>
            $(".lock-button").click(function(){
                var id = $(this).data("id");
                var jenjang = $(this).data("jenjang");
                swal({
                    title: "Anda yakin untuk Mengunci Jenjang "+jenjang+"?",
                    text: "Mengunci nilai SAR akan menjadikan nilai sasaran tidak dapat diubah kembali!",
                    icon: "warning",
                    buttons: true,
                    dangerMode: true,
                    })
                    .then((willDelete) => {
                    if (willDelete) {
                        $("#lock-id").val(id);
                        $("#lock-form").submit();
                    } else {
                        return;
                    }
                    });
            });
            $('#modal-edit').on('show.bs.modal', function (event) {
                var button = $(event.relatedTarget); // Button that triggered the modal
                
                var id = button.data('id');
                var jenjang = button.data('jenjang');
                var sasaran = button.data('sasaran');

                var modal = $(this);

                modal.find('.modal-body #id').val(id);
                modal.find('.modal-body #edt_jenjang').val(jenjang);
                modal.find('.modal-body #edt_sasaran').val(sasaran);
            });

    </script>

